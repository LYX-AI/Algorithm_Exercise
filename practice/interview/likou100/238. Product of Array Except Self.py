'''
è¿™é“é¢˜çš„æ•´ä½“æ€è·¯ï¼š
éå¸¸å¥½ï¼ä½ è¿™ä¸ªé—®é¢˜é—®å¾—å¾ˆåˆ°ä½ğŸ‘â€”â€”\*\*â€œä¸ºä»€ä¹ˆå‰ç¼€ç§¯ Ã— åç¼€ç§¯å°±èƒ½å¾—åˆ°æˆ‘ä»¬è¦çš„ç»“æœï¼Ÿâ€\*\*æˆ‘ä»¬å°±æ¥æ·±å…¥ç†è§£è¿™ä¸ªåŸç†ï¼Œ**ä¸æ˜¯æ­»è®°ï¼Œè€Œæ˜¯çœŸæ­£çœ‹æ‡‚å®ƒèƒŒåçš„æ•°å­¦é€»è¾‘ã€‚**

---

## ğŸŒŸæˆ‘ä»¬çš„ç›®æ ‡æ˜¯ï¼š

å¯¹äºæ¯ä¸ªä¸‹æ ‡ `i`ï¼Œæˆ‘ä»¬è¦è®¡ç®—ï¼š

```text
answer[i] = é™¤äº† nums[i] ä»¥å¤–æ‰€æœ‰ nums ä¸­å…ƒç´ çš„ä¹˜ç§¯
```

ä¹Ÿå°±æ˜¯ï¼š

```text
answer[i] = nums[0] * nums[1] * ... * nums[i-1] * nums[i+1] * ... * nums[n-1]
```

---

## âœ¨å¼•å…¥ä¸¤ä¸ªå…³é”®æ¦‚å¿µï¼š

æˆ‘ä»¬ç”¨ä¸¤ä¸ªå˜é‡æ¥è¾…åŠ©è¿™ä¸ªè®¡ç®—ï¼š

* `prefix[i]` è¡¨ç¤ºï¼š`nums[0] * nums[1] * ... * nums[i-1]`ï¼ˆå³ **i å·¦è¾¹æ‰€æœ‰æ•°çš„ä¹˜ç§¯**ï¼‰
* `suffix[i]` è¡¨ç¤ºï¼š`nums[i+1] * nums[i+2] * ... * nums[n-1]`ï¼ˆå³ **i å³è¾¹æ‰€æœ‰æ•°çš„ä¹˜ç§¯**ï¼‰

é‚£ä¹ˆï¼š

```text
answer[i] = prefix[i] * suffix[i]
```

æ˜¯ä¸æ˜¯å°±å®Œç¾è§£å†³äº†ï¼Ÿâœ… å› ä¸ºè¿™ä¸¤ä¸ªéƒ¨åˆ†åŠ èµ·æ¥å°±æ˜¯â€œé™¤äº† `nums[i]` æœ¬èº«ä»¥å¤–çš„ä¹˜ç§¯â€ã€‚

---

## ğŸ”ä¸¾ä¸ªå…·ä½“ä¾‹å­æ¥éªŒè¯è¿™ä¸ªé€»è¾‘ï¼š

å‡è®¾ï¼š

```python
nums = [1, 2, 3, 4]
```

æˆ‘ä»¬æƒ³æ±‚ï¼š

```python
answer[0] = 2 * 3 * 4 = 24
answer[1] = 1 * 3 * 4 = 12
answer[2] = 1 * 2 * 4 = 8
answer[3] = 1 * 2 * 3 = 6
```

---

æˆ‘ä»¬æ¥æ‰‹åŠ¨è®¡ç®—ä¸€éï¼š

### ç¬¬ä¸€æ­¥ï¼šå‰ç¼€ç§¯ï¼ˆä»å·¦å¾€å³ï¼‰

```python
prefix = [1, 1, 2, 6]
è§£é‡Šï¼š
prefix[0] = æ²¡æœ‰å·¦è¾¹ => 1
prefix[1] = 1
prefix[2] = 1 * 2 = 2
prefix[3] = 1 * 2 * 3 = 6
```

### ç¬¬äºŒæ­¥ï¼šåç¼€ç§¯ï¼ˆä»å³å¾€å·¦ï¼‰

```python
suffix = [24, 12, 4, 1]
è§£é‡Šï¼š
suffix[3] = æ²¡æœ‰å³è¾¹ => 1
suffix[2] = 4
suffix[1] = 3 * 4 = 12
suffix[0] = 2 * 3 * 4 = 24
```

### ç¬¬ä¸‰æ­¥ï¼šå‰ç¼€ Ã— åç¼€

```python
answer[i] = prefix[i] * suffix[i]
answer = [1*24, 1*12, 2*4, 6*1] = [24, 12, 8, 6]
```

å®Œç¾ï¼âœ…

---

## âœ… ä¸ºä»€ä¹ˆä¸èƒ½ç”¨å‰ç¼€ç§¯æˆ–åç¼€ç§¯å•ç‹¬è®¡ç®—ï¼Ÿ

å› ä¸º**æˆ‘ä»¬è¦è·³è¿‡å½“å‰å…ƒç´ æœ¬èº«**ï¼Œæ‰€ä»¥å¿…é¡»æŠŠå½“å‰å…ƒç´ å·¦è¾¹å’Œå³è¾¹çš„éƒ¨åˆ†åˆ†å¼€è®¡ç®—â€”â€”**â€œæ‹¼èµ·æ¥ä½†ä¸åŒ…å«è‡ªå·±â€**ï¼Œåªæœ‰å‰ç¼€ç§¯ Ã— åç¼€ç§¯å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚

---

## ğŸ’¡é€šä¿—æ¯”å–»ï¼š

å‡è®¾ä½ æ˜¯ä¸€ä¸ªäººç«™åœ¨ä¸€æ’äººä¸­ï¼š

* ä½ å·¦è¾¹çš„äººå…¨éƒ½æ‰‹æ‹‰æ‰‹åšäº†ä¸€ä¸ªé“¾æ¡ï¼ˆå‰ç¼€ç§¯ï¼‰
* ä½ å³è¾¹çš„äººä¹Ÿæ‹‰æˆä¸€ä¸ªé“¾æ¡ï¼ˆåç¼€ç§¯ï¼‰
* ä½ ä¸å‚ä¸ä»»ä½•é“¾æ¡ï¼Œä½†ä½ è¦çŸ¥é“ï¼šå·¦å³ä¸¤æ¡é“¾æ¡åˆèµ·æ¥çš„åŠ›é‡æ˜¯å¤šå°‘ï¼ˆå‰ç¼€ Ã— åç¼€ï¼‰

---

## æ€»ç»“ä¸€å¥è¯ï¼š

> **æ¯ä¸ªå…ƒç´ è¦è·³è¿‡è‡ªå·±ï¼Œåªèƒ½é â€œå·¦å³ä¸¤è¾¹ä¹˜ç§¯â€åˆå¹¶ï¼Œå‰ç¼€ä¹˜ç§¯è´Ÿè´£å·¦è¾¹ï¼Œåç¼€ä¹˜ç§¯è´Ÿè´£å³è¾¹ï¼Œæ‹¼èµ·æ¥å°±æ˜¯ç­”æ¡ˆã€‚**

---

å¦‚æœä½ è§‰å¾—æˆ‘è§£é‡Šå¾—è¿˜ä¸å¤Ÿå½¢è±¡ï¼Œæˆ–è€…æƒ³æˆ‘å†™ä¸ªå›¾å½¢åŒ–çš„ç‰ˆæœ¬è¾…åŠ©è®°å¿†ï¼Œä¹Ÿå¯ä»¥å‘Šè¯‰æˆ‘ï¼æˆ‘ä»¬å¯ä»¥åšä¸ªâ€œçº¸é¢æ¨å¯¼å›¾â€æ¥è§†è§‰åŒ–ç†è§£ã€‚æ˜¯å¦ç»§ç»­ï¼Ÿ


'''
class Solution:
    def productExceptSelf(self, nums: list[int]) -> list[int]:
      n = len(nums)
      result = [1]*n

      #è®¡ç®—å‰ç¼€
      prfix = 1
      for i in range(n):
          result[i] = prfix
          prfix *= nums[i]

      #è®¡ç®—åç¼€
      suffix = 1
      for i in range(n-1,-1,-1):
          result[i] *= suffix
          suffix *= nums[i]

      return result


