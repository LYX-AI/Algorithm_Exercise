'''
è¿™é“é¢˜ä¸€å¼€å§‹æˆ‘æƒ³çš„æ€è·¯æ˜¯ç”¨é€’å½’çš„æ–¹æ³•æ¥è§£ä½†æ˜¯æ€è·¯é”™äº†
ä¸»è¦æŠ“ä½ä¸€ä¸ªå…¬å¼
å‰ç¼€å’Œå°±æ˜¯æ•°ç»„ä¸­ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œç´¯åŠ åˆ°å½“å‰ä½ç½®çš„å’Œã€‚

æ¯”å¦‚æœ‰æ•°ç»„ï¼š

python
Copy
Edit
nums = [3, 4, 7, 2, -3, 1, 4, 2]
å®ƒçš„å‰ç¼€å’Œï¼ˆpre_sumï¼‰æ˜¯ï¼š

css
Copy
Edit
[3, 3+4, 3+4+7, 3+4+7+2, ...]
âŸ¹ [3, 7, 14, 16, 13, 14, 18, 20]
æˆ‘ä»¬ç”¨ä¸€ä¸ªæ•°ç»„ pre_sum[i] è¡¨ç¤ºä» ä¸‹æ ‡ 0 åˆ°ä¸‹æ ‡ i çš„æ‰€æœ‰å…ƒç´ çš„å’Œã€‚

ğŸŒŸ äºŒã€ä¸ºä»€ä¹ˆè¦ç”¨å‰ç¼€å’Œï¼Ÿ
æˆ‘ä»¬å¯ä»¥ç”¨ä¸¤ä¸ªå‰ç¼€å’Œç›¸å‡çš„æ–¹å¼ï¼Œå¿«é€Ÿå¾—åˆ°æŸä¸€æ®µå­æ•°ç»„çš„å’Œã€‚

ä¸¾ä¸ªä¾‹å­ï¼š
ä½ æƒ³è¦å¿«é€Ÿæ±‚å‡º nums[2] åˆ° nums[4] çš„å’Œï¼Ÿ

Copy
Edit
nums[2] + nums[3] + nums[4] = pre_sum[4] - pre_sum[1]
ä½ ä¼šå‘ç°ï¼š

Copy
Edit
å‰ç¼€å’Œçš„å·® = æŸæ®µå­æ•°ç»„çš„å’Œ
æ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦æ¯æ¬¡éƒ½å»ä¸€ä¸ªä¸ªåŠ æ•°å­—ï¼Œåªéœ€è¦æŸ¥ä¸€ä¸‹å‰ç¼€å’Œçš„å·®å€¼å°±è¡Œï¼


'''
from collections import defaultdict
class Solution:
    def subarraySum(self, nums: list[int], k: int) -> int:
        #è¿™é“é¢˜æˆ‘æƒ³åˆ°äº†ç”¨é€’å½’çš„æ–¹æ³•æ¥å†™,é€’å½’å‡½æ•°å°±æ˜¯ä¸€ä¸ªæ•°å­—é‡Œæ‰¾åˆ°æ‰€æœ‰èƒ½ç»„æˆç›®æ ‡æ ‘
        profix_count = defaultdict(int)
        profix_count[0] = 1
        profix_sum = 0
        reslt = 0
        for num in nums:
            profix_sum += num
            reslt += profix_count[profix_sum-k]
            profix_count[profix_sum] += 1
        return reslt
